{% extends "base.html" %}

{% block title %}{{ meaning.gloss }}{% endblock %}

{% block top %}<h1>{{ meaning.description }}</h1>{% endblock %}

{% block content %}
<table>
  <tr>
    <th>ID</th>
    <th>Language</th>
    <th>Source Form</th>
    <th>Phonological Form</th>
    <th>Cognate Class</th>
  </tr>
  {% for lexeme in lexemes %}
  <tr class="{% cycle 'odd' 'even' %}">
    <td>{{ lexeme.language.id }}</td>
    <td><a href="{% url language-report lexeme.language.id %}">{{ lexeme.language.utf8_name }}</a></td>
    <td>{{ lexeme.source_form }}</td>
    <td>{{ lexeme.phon_form }}</td>
    <td> 
      {% for cj in lexeme.cognatejudgement_set.all %}
        {% ifequal edit_cognate_judgement cj.id %}
          <form action="" method="post">
            {{ form.cognate_class }}
            {% if lexeme.cognate_class.all %} {# only show the add button if there are other cognate classes already #}
              <a href="/meaning/{{ meaning.gloss }}/{{ lexeme.id }}/add/"><img src="/media/buttons/add.png" alt="Add" title="Add another cognate class" /><a>
            {% endif %}
          </form>
        {% else %}
          {{ cj.cognate_class.alias }}
          <a href="/meaning/{{ meaning.gloss }}/{{ lexeme.id }}/{{ cj.id }}/"><img src="/media/buttons/tag.png" alt="Change cognate" title="Change the cognate set coding" /><a>
          <br />
        {% endifequal %}
      {% endfor %}

      {% ifequal add_cognate_judgement lexeme.id %}
        <form action="" method="post">
          {{ form.cognate_class }}
          {% if lexeme.cognate_class.all %} {# only show the add button if there are other cognate classes already #}
            <a href="/meaning/{{ meaning.gloss }}/{{ lexeme.id }}/add/"><img src="/media/buttons/add.png" alt="Add" title="Add another cognate class" /><a>
          {% endif %}
        </form>
      {% else %}
        {% if not lexeme.cognatejudgement_set.all %}
          <a href="/meaning/{{ meaning.gloss }}/{{ lexeme.id }}/add/"><img src="/media/buttons/add.png" alt="Add" title="Add another cognate class" /><a>
        {% endif %}
      {% endifequal %}
    </td>
    <td>
        <a href="/lexeme/{{ lexeme.id }}"><img src="/media/buttons/view.png" alt="View" title="View/edit the lexical entry" /><a>
    </td>
  {% endfor %}
</table>
{% endblock %}

{% block controls %}
{% include "snippets/go_to.html" %}
{% endblock %}

{# vim: set ft=htmldjango nowrap shiftwidth=2 expandtab: #}
