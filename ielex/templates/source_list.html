{% extends "base.html" %}
{# do permissions #}

{% load staticfiles %}

{% block title %}
  List of sources
{% endblock %}

{% block top %}
  <h1>Sources</h1>
{% endblock %}

{% block controls %}
  {% include "snippets/go_to.html" %}
{% endblock %}

{% block content %}
  <div class="row">
    {% if user.is_authenticated %}
      <a href="/source/add/" class="btn btn-default"
         data-toggle="tooltip"
         data-placement="bottom"
         title="Add new source">
        <span class="glyphicon glyphicon-plus-sign"></span>source
      </a>
    {% endif %}
    <div class="col-md-6">
      {% for type_name, sources in grouped_sources %}
        <div class="panel panel-default">
          <div class="panel-heading">
            <h2 class="panel-title">
              {{ type_name }}
            </h2>
          </div>
          <div class="panel-body">
            {% for source in sources %}
              <dl class="well">
                <a href="{% url 'view-source' source.id %}" title="Edit this source" class="pull-right">
                  <span class="glyphicon glyphicon-search"></span>
                </a>
                <dd>
                  {{ source.citation_text }}
                </dd>
                {% if source.description %}
                  <dt>
                    Notes:
                  </dt>
                  <dd>
                    <em>{{ source.description }}</em>
                  </dd>
                {% endif %}
                <dd style="padding-top: 1em;">
                  Lexemes: <strong>{{ source.lexemecitation_set.count }}</strong><br>
                  Cognate Judgements: <strong>{{ source.cognatejudgementcitation_set.count }}</strong><br>
                  [{{ source.modified|date:"r"  }}]
                </dd>
              </dl>
            {% endfor %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
{# vim: set ft=htmldjango nowrap shiftwidth=2 expandtab: #}
