{% extends "base.html" %}

{% load staticfiles %}
{% load lexicon_utils %}

{% block title %}
  Word list
{% endblock %}

{% block top %}
  <h1>
    Meanings
    {% if user.is_authenticated %}
      <a href="/meanings/add-new/"
         class="btn btn-default btn-xs"
         data-toggle="tooltip" data-placement="bottom"
         title="add meaning">
        <span class="glyphicon glyphicon-plus-sign"></span>
      </a>
    {% endif %}
  </h1>
{% endblock %}

{% block controls %}
  {% include "snippets/go_to.html" %}
{% endblock %}

{% block content %}
  <div class="row">
    <div class="col-md-4">
      <form action="" method="post">
        {% csrf_token %}
        <div class="form-group">
          <table>
            {{ form.as_table }}
          </table>
        </div>
      </form>
    </div>
  </div>
  <div class="row">
    <div class="col-md-4">
      <table class="table table-striped">
        <tr>
          <th>Meaning</th>
          <th>Show<br>Languages</th>
          <th>Show<br>Cog. Sets</th>
          {# <th>Description</th> #}
          {% if user.is_authenticated %}
          <th>Edit<br>metadata</th>
          <th>% Cog.<br>coded</th>
          {% endif %}
        </tr>
        {% for meaning in meanings %}
          <tr class="{% cycle 'odd' 'even' %}">
            <td>{{ meaning.gloss }}</td>
            <td class="mid-align">
              <a href="{% url 'view-meaning-languages' meaning.gloss current_language_list %}"
                 title="Edit ‘{{ meaning.gloss }}' by language list">
                <span class="glyphicon glyphicon-edit"></span>
              </a>
            </td>
            <td class="mid-align">
              <a href="{% url 'edit-cogclasses' meaning.gloss %}"
                 title="Edit cognate classes for ‘{{ meaning.gloss }}'">
                <span class="glyphicon glyphicon-edit"></span>
              </a>
            </td>
            {# <td>{{ meaning.notes|linebreaksbr|truncatewords:20 }}</td> #}
            {% if user.is_authenticated %}
              <td class="mid-align">
                <a href="{% url 'edit-meaning' meaning.gloss %}"
                   title="Edit ‘{{ meaning.gloss }}’ metadata">
                  <span class="glyphicon glyphicon-edit"></span>
                </a>
              </td>
              <td>
                <span class="badge">
                  {{ meaning.percent_coded|floatformat:1 }}
                </span>
              </td>
            {% endif %}
          </tr>
        {% endfor %}
      </table>
    </div>
  </div>
{% endblock %}
{# vim: set ft=htmldjango nowrap shiftwidth=2 expandtab: #}
