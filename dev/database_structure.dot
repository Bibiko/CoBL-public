digraph g { // neato -Tpdf -O database_structure.dot
  ordering=out;
  fontsize=10;
  overlap=scale;
  splines=true;
  sep=0.2;
  ratio=0.7;
  label="IELEX database schema version 0.4";
  node [shape=Mrecord];
  edge [arrowhead=dot];

  lexeme [pos="2,3!",style=filled,
	label="{LEXEMES |<id> id |<lid> language_id |<mid> meaning_id | source_form | phon_form | gloss | notes | modified }"];
  source [pos="7,3!",style=filled,
	label="{SOURCES |<id> id |{type_code |{book | person | url}}|  citation | description | modified }"];
  meaning [pos="1,2!",style=filled,
	label="{MEANINGS |<id> id | gloss | description |notes }"];
  language [pos="1,4!",style=filled,
	label="{LANGUAGES |<id> id | iso_code | ascii_name | utf8_name | sort_key }"];
  cogset [pos="4,4!",style=filled,
	label="{COGNATE\nSET |<id> id | reconstruction | notes | modified }"];
  relation [pos="4,1!",style=filled,
	label="{SEMANTIC\nRELATIONS | <id> id |{descriptor\n(kinship category\npronominal category\netc.) |{M | MZ | etc.}}}"];
  dyen_name [pos="0,5!",style=filled,
	label="{Dyen names |<lid> language_id | name}"];
  abvd_name [pos="0,4!",style=filled,
	label="{ABVD names |<lid> language_id | name}"];
  language_list [pos="0,3!", style=filled,
	label="{Language\nList | list_id | name |<lid> language_id_list | modified }"];
  sort_order [pos="0,2!", style=filled,
	label="{Language\nSort Order | list_id | name |<lid> language_id_list | modified }"];
  key1 [pos="0,1!", label="independent table", style=filled];
  key2 [pos="2,1!", label="many-to-many table"];
  key2 -> key1 [label="Foreign key"];

  // Many to many tables
  judgement [pos="3,4.5!",
	label="{Cognate\nJudgements |<id> id |<fid> lexeme_id |<cid> cog_set_id | modified }"];
  formsource [pos="5,3!",
	label="{Lexeme sources |<fid> lexeme_id |<sid> source_id | pages | reliability | comment | modified }"];
  judgesource [pos="5,5!",
	label="{Cognate Judgement\nsources |<jid> judgement_id |<sid> source_id | pages | reliability | comment | modified }"];
  // cogsource [pos="5,4!",
  //	label="{Reconstruction\n sources |<cid> cog_set_id |<sid> source_id}"];
  semantic_extension [pos="3,2!",
	label="{Semantic Extension\n(i.e. “lexeme can\n  refer to relation”) |<id> id |<fid> lexeme_id |<bid> bio_rel_id | pages | reliability | comment | modified }"];
  extension_source [pos="5,2!",
	label="{Semantic Extension sources |<lid> link_id |<sid> source_id | pages | reliability | comment | modified }"];
  relation_sort_order [pos="5.5,1!", style=filled,
	label="{Semantic Relation\nSort Order | list_id | name |<rid> relation_id_list | modified }"];

  // meaning [pos="1,1!"];	
  // language [pos="1,2!"];
  // lexeme [pos="2,1.5!"];
  // formsource [pos="4,1!"];
  // judgesource [pos="4.5,2.5!"];
  // cogsource [pos="5,1.5!"];
  // source [pos="6,1.5!"];
  // cogset [pos="4,1.5!"];
  // judgement [pos="3,2!"];
  // relation [pos="4,0!"];
  // semantic_extension [pos="3,0.5!"];

  judgement:fid -> lexeme:id [weight=8]; 
  judgement:cid -> cogset:id [weight=8];
  formsource:fid -> lexeme:id;
  formsource:sid -> source:id;
  judgesource:jid -> judgement:id;
  judgesource:sid -> source:id;
  // cogsource:cid -> cogset:id;
  // cogsource:sid -> source:id;
  lexeme:lid -> language:id;
  lexeme:mid -> meaning:id;

  semantic_extension:fid -> lexeme:id [style=dashed];
  semantic_extension:bid -> relation:id [style=dashed];
  extension_source:lid -> semantic_extension:id [style=dashed];
  extension_source:sid -> source:id [style=dashed];

  dyen_name:lid -> language:id;
  abvd_name:lid -> language:id;
  language_list:lid -> language:id;
  sort_order:lid -> language:id;
  relation_sort_order:rid -> relation:id
}
